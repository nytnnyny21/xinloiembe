<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Xin l·ªói em</title>
  <style>
    body {
      background-color: pink;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 100px;
    }
    #game, #endMessage, #secondMessage, #ticTacToeSection, #playTicTacToeBtn {
      display: none;
      margin-top: 30px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      background-color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #ffe6e6;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(3, 80px);
      justify-content: center;
      margin-top: 20px;
    }
    .cell {
      width: 80px;
      height: 80px;
      font-size: 30px;
      border: 2px solid #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #ffcce0;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1 id="firstMessage">tui bi·∫øt em ƒëang bu·ªìn. em bu·ªìn l√† l·ªói c·ªßa tui. tui xin l·ªói b·∫°n nh·ªè nhi·ªÅu l·∫Øm</h1>
  <button onclick="showSecondMessage()">ti·∫øp theo</button>

  <div id="secondMessage">
    <h2>b√¢y gi·ªù tui s·∫Ω thay th·∫±ng √Ω h√≤ ngu b√≤ kia ch∆°i v·ªõi em nhe</h2>
    <div id="game">
      <h3>ch∆°i o·∫≥n t√π x√¨ v·ªõi tui n√®!</h3>
      <button onclick="play('k√©o')">‚úåÔ∏è k√©o</button>
      <button onclick="play('b√∫a')">‚úä b√∫a</button>
      <button onclick="play('bao')">‚úã bao</button>
      <div id="result" style="margin-top: 20px; font-weight: bold;"></div>
    </div>

    <div id="afterRPS" style="margin-top: 30px;">
      <p>n·∫øu em ch√°n th√¨ c√≥ th·ªÉ ch∆°i tic tac toe v·ªõi tui n√®</p>
      <button id="playTicTacToeBtn" onclick="startTicTacToe()">ch∆°i tic tac toe</button>
    </div>
  </div>

  <div id="ticTacToeSection">
    <h3>tic tac toe n√®, em ƒëi tr∆∞·ªõc √°!</h3>
    <div class="board" id="board"></div>
  </div>

  <button style="margin-top: 40px;" onclick="endGame()">k·∫øt th√∫c</button>

  <div id="endMessage">
    <h2>hy v·ªçng em ƒë√£ c·∫£m th·∫•y ·ªïn h∆°n. tui y√™u em nhi·ªÅu l·∫Øm ƒë√≥ thanh nguy√™n. t·∫°m bi·ªát em b</h2>
  </div>

  <script>
  function showSecondMessage() {
    document.querySelector('button').style.display = 'none';
    document.getElementById('secondMessage').style.display = 'block';
    document.getElementById('game').style.display = 'block';
    document.getElementById('playTicTacToeBtn').style.display = 'inline-block';
  }

  function play(playerChoice) {
    const choices = ['k√©o', 'b√∫a', 'bao'];
    const botChoice = choices[Math.floor(Math.random() * choices.length)];
    let result = '';

    if (playerChoice === botChoice) {
      result = `em ch·ªçn ${playerChoice}, tui c≈©ng ch·ªçn ${botChoice}. h√≤a √° nhe!`;
    } else if (
      (playerChoice === 'k√©o' && botChoice === 'bao') ||
      (playerChoice === 'b√∫a' && botChoice === 'k√©o') ||
      (playerChoice === 'bao' && botChoice === 'b√∫a')
    ) {
      result = `em ch·ªçn ${playerChoice}, tui ch·ªçn ${botChoice}. em th·∫Øng r√πi ƒë√≥ hehehhehehehe`;
    } else {
      result = `em ch·ªçn ${playerChoice}, tui ch·ªçn ${botChoice}. tui th·∫Øng √° nhaaaa`;
    }

    document.getElementById('result').innerText = result;
  }

  function startTicTacToe() {
    document.getElementById('ticTacToeSection').style.display = 'block';
    createBoard();
  }

  let currentPlayer = 'X'; // Em ƒëi tr∆∞·ªõc
  let boardState = Array(9).fill(null);
  let gameOver = false;

  function createBoard() {
    const board = document.getElementById('board');
    board.innerHTML = '';
    boardState = Array(9).fill(null);
    currentPlayer = 'X';
    gameOver = false;

    for (let i = 0; i < 9; i++) {
      const cell = document.createElement('div');
      cell.classList.add('cell');
      cell.dataset.index = i;
      cell.addEventListener('click', handleMove);
      board.appendChild(cell);
    }
  }

  function handleMove(e) {
  const index = e.target.dataset.index;
  if (boardState[index] || gameOver || currentPlayer !== 'X') return;

  boardState[index] = 'X';
  e.target.innerText = 'X';

  if (checkWin('X')) {
    alert('em th·∫Øng r·ªìi ƒë√≥! ü•∫');
    gameOver = true;
    setTimeout(createBoard, 2000); // T·ª± reset sau 2 gi√¢y
    return;
  }

  if (!boardState.includes(null)) {
    alert("H√≤a nhen!");
    gameOver = true;
    setTimeout(createBoard, 2000);
    return;
  }

  currentPlayer = 'O';
  setTimeout(botMove, 500);
}


  function botMove() {
  if (gameOver) return;

  const emptyIndices = boardState
    .map((val, idx) => val === null ? idx : null)
    .filter(idx => idx !== null);

  const botChoice = emptyIndices[Math.floor(Math.random() * emptyIndices.length)];
  boardState[botChoice] = 'O';
  const cell = document.querySelector(`.cell[data-index='${botChoice}']`);
  cell.innerText = 'O';

  if (checkWin('O')) {
    alert('tui th·∫Øng n√® em hehehhehehehe');
    gameOver = true;
    setTimeout(createBoard, 2000);
    return;
  }

  if (!boardState.includes(null)) {
    alert("H√≤a nhen!");
    gameOver = true;
    setTimeout(createBoard, 2000);
    return;
  }

 
    currentPlayer = 'X'; // t·ªõi l∆∞·ª£t em l·∫°i r√πi ƒë√≥
  }

  function checkWin(player) {
    const winPatterns = [
      [0,1,2], [3,4,5], [6,7,8],
      [0,3,6], [1,4,7], [2,5,8],
      [0,4,8], [2,4,6]
    ];
    return winPatterns.some(pattern =>
      pattern.every(index => boardState[index] === player)
    );
  }

  function endGame() {
    document.getElementById('secondMessage').style.display = 'none';
    document.getElementById('ticTacToeSection').style.display = 'none';
    document.getElementById('endMessage').style.display = 'block';
  }
</script>
</body>
</html>
